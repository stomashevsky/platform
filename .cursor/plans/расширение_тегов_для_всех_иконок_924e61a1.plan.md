# План исправления функции Update Selected Icons

## Критические проблемы

1. **Иконки пропадают** - функция перемещает компоненты в auto-layout frames, что приводит к потере иконок
2. **Группировка не нужна** - не нужно группировать иконки и оборачивать в autolayout
3. **Слои с прозрачностью сломаны** - flattenComponent обрабатывает векторы с прозрачностью неправильно
4. **Не все иконки получают теги** - многие иконки не имеют тегов в описаниях, все должны иметь

## Текущая ситуация

Функция `updateIconComponents()` в `figma-plugin/code.ts`:
- Перемещает компоненты в auto-layout frames (строки 5380-5434) - ЭТО НУЖНО УБРАТЬ
- Использует `componentsByCategory` и `getIconBaseName` для группировки - ЭТО НЕ НУЖНО
- Функция `flattenComponent()` обрабатывает векторы с прозрачностью неправильно
- Функция `generateSearchTags()` возвращает пустую строку для иконок, которых нет в switch - ЭТО НУЖНО ИСПРАВИТЬ

## Задачи

### 1. Убрать группировку иконок в auto-layout frames
В функции `updateIconComponents()` (строка ~5316):
- Удалить код создания `categoryFrame` и перемещения компонентов (строки 5380-5434)
- Убрать использование `componentsByCategory` Map
- Убрать вызов `getIconBaseName()` - эта функция больше не нужна
- Компоненты НЕ ДОЛЖНЫ перемещаться - они остаются на своих местах
- Компоненты НЕ ДОЛЖНЫ переименовываться в kebab-case (оставить оригинальные имена) - только добавить description

### 2. Исправить flattenComponent - не трогать слои с прозрачностью
В функции `flattenComponent()` (строка ~4942):
- НЕ flatten векторы, если у них есть прозрачность (opacity < 1.0)
- Flatten ТОЛЬКО векторы с opacity = 1.0 (полностью непрозрачные)
- Если есть прозрачность - просто извлекать векторы на уровень компонента БЕЗ flatten

### 3. Исправить generateSearchTags - все иконки должны иметь теги
В функции `generateSearchTags()` (строка ~2764):
- Если иконка не найдена в switch, возвращать пустую строку - это проблема
- Нужно добавить default case или fallback, который будет генерировать теги на основе слов из имени
- ИЛИ добавить больше case statements для всех возможных иконок
- ВАЖНО: все иконки должны получить хотя бы какие-то теги

### 4. Не переименовывать компоненты
В функции `updateIconComponents()`:
- Убрать строку `component.name = kebabName;`
- Оставить только `component.description = tags;`
- Имена компонентов должны оставаться оригинальными

## Файлы для изменения

- `figma-plugin/code.ts`
  - Функция `updateIconComponents()` - убрать группировку, убрать переименование (строка ~5316)
  - Функция `flattenComponent()` - не трогать слои с прозрачностью (строка ~4942)
  - Функция `generateSearchTags()` - убедиться, что все иконки получают теги (строка ~2764)

## Результат

1. Иконки НЕ пропадают - они остаются на своих местах
2. Иконки НЕ группируются - нет auto-layout frames
3. Слои с прозрачностью НЕ трогаются - они остаются как есть
4. Все иконки получают теги в description
5. Имена компонентов НЕ изменяются - только description добавляется
